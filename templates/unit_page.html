{% extends 'base.html' %}

<script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>


{% block title %}
    {{ unit.name }}
{% endblock title %}

{% block content %}
    <a href="{{ unit.node.get_absolute_url }}"> Назад </a>

    {{ measurements.count }}

    {% if unit.image %}
        <img src="{{ unit.image.url }}" alt="{{ unit.name }}">
    {% endif %}


    <div id="container" style="width: 75%;">
        <canvas id="chart"></canvas>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>

    <script>
        const config = {
            type: 'line',
            data: {
                datasets: [{
                    data: {{ data|safe }},
                    backgroundColor: ['#696969', '#808080', '#A9A9A9', '#C0C0C0', '#D3D3D3'],
                    label: 'Потребление тока'
                }],
                labels: {{ labels|safe }}
            },
            options: {
                responsive: true
            }
        };

        window.onload = function () {
            const ctx = document.getElementById('chart').getContext('2d');
            window.myPie = new Chart(ctx, config);
        };
    </script>




{% endblock content %}
